<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://img.hcharts.cn/jquery/jquery-1.8.3.min.js"></script>
    <script src="https://code.hcharts.cn/highstock/highstock.js"></script>
    <!-- <script src="https://code.hcharts.cn/highcharts/modules/exporting.js"></script> -->
    <!-- <script src="https://code.hcharts.cn/plugins/zh_cn.js"></script> -->
    <!-- <script src="https://code.hcharts.cn/highcharts/modules/drag-panes.js"></script> -->
    <style>
      body{
        background: #000;
      }
      .highcharts-axis-resizer {
          stroke: #eee;
      }
      .highcharts-axis-resizer:hover {
          stroke: #ccc;
      }
    </style>
  </head>
  <body>
    <div id="container" style="min-width:400px;height:400px">图表加载中...</div>
    <script>
      // Highcharts.setOptions({
      //     lang: {
      //         rangeSelectorZoom: ''
      //     }
      // });
      $.getJSON('https://data.jianshukeji.com/stock/history/000001', function (data) {
        if(data.code !== 1) {
          alert('读取股票数据失败！');
          return false;
        }
        data = data.data;
        console.log(data)
        var ohlc = [],
          volume = [],
          dataLength = data.length,
          // set the allowed units for data grouping
          groupingUnits = [[
              'week',                         // unit name
              [1]                             // allowed multiples
          ], [
              'month',
              [1, 2, 3, 4, 6]
          ]],
          i = 0;
        for (i; i < dataLength; i += 1) {
          ohlc.push([
            data[i][0], // the date
            data[i][1], // open
            data[i][2], // high
            data[i][3], // low
            data[i][4] // close
          ]);
          volume.push([
            data[i][0], // the date
            data[i][5] // the volume
          ]);
        }
        // create the chart
        var chart = Highcharts.stockChart('container', {
          chart: {
            backgroundColor: 'none',
          },
          // rangeSelector: {
          //     selected: 1,
          //     inputDateFormat: '%Y-%m-%d'
          // },
          title: {
              text: null
          },
          credits:{
            enabled: false // 禁用版权信息
          },
          xAxis: {
            dateTimeLabelFormats: {
              millisecond: '%H:%M:%S.%L',
              second: '%H:%M:%S',
              minute: '%H:%M',
              hour: '%H:%M',
              day: '%m-%d',
              week: '%m-%d',
              month: '%y-%m',
              year: '%Y'
            },
            labels: {
              style: {
                color: '#7d7b8a'
              }
            },
          },
          tooltip: {
            split: false,
            shared: true,
          },
          yAxis: [{
            labels: {
              align: 'right',
              x: -3,
              style: {
                color: '#7d7b8a'
              }
            },
            title: {
                // text: '股价'
                text: null,
            },
            height: '65%',
            resize: {
                enabled: true
            },
            gridLineColor: '#333', //網格線
            lineWidth: 2
          }, {
            labels: {
              align: 'right',
              x: -3,
              style: {
                color: '#7d7b8a'
              }
            },
            title: {
                // text: '成交量'
                text: null,
            },
            top: '65%',
            height: '35%',
            offset: 0,
            gridLineColor: '#333', //網格線
            lineWidth: 2
          }],
          series: [{
            type: 'candlestick',
            name: '平安银行',
            color: 'green',
            lineColor: 'green',
            upColor: 'red',
            upLineColor: 'red',
            tooltip: {
            },
            navigatorOptions: {
                color: Highcharts.getOptions().colors[0]
            },
            data: ohlc,
            dataGrouping: {
                units: groupingUnits
            },
            id: 'sz'
          },{
            type: 'column',
            data: volume,
            yAxis: 1,
            dataGrouping: {
                units: groupingUnits
            }
          }]
        });
      });
    </script>
  </body>
</html>
