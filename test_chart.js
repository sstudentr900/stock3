$(function() {
  var color = {
      up: '#c40f0fd3',
      down: '#058296',
      vol: '#6f9196',
      ma5: '#dea805',
      ma10: '#46A3FF',
      ma20: '#ca0199',
      //ma60: '#D94600'

  };
  var data = {
      date: JSON.parse('["2023-05-12","2023-05-15","2023-05-16","2023-05-17","2023-05-18","2023-05-19","2023-05-22","2023-05-23","2023-05-24","2023-05-25","2023-05-26","2023-05-29","2023-05-30","2023-05-31","2023-06-01","2023-06-02","2023-06-05","2023-06-06","2023-06-07","2023-06-08","2023-06-09","2023-06-12","2023-06-13","2023-06-14","2023-06-15","2023-06-16","2023-06-19","2023-06-20","2023-06-21","2023-06-26","2023-06-27","2023-06-28","2023-06-29","2023-06-30","2023-07-03","2023-07-04","2023-07-05","2023-07-06","2023-07-07","2023-07-10","2023-07-11","2023-07-12","2023-07-13","2023-07-14","2023-07-17","2023-07-18","2023-07-19","2023-07-20","2023-07-21","2023-07-24","2023-07-25","2023-07-26","2023-07-27","2023-07-28","2023-07-31","2023-08-01","2023-08-02","2023-08-04","2023-08-07","2023-08-08","2023-08-09","2023-08-10","2023-08-11","2023-08-14","2023-08-15","2023-08-16","2023-08-17","2023-08-18","2023-08-21","2023-08-22","2023-08-23","2023-08-24","2023-08-25","2023-08-28","2023-08-29","2023-08-30","2023-08-31","2023-09-01","2023-09-04","2023-09-05","2023-09-06","2023-09-07","2023-09-08","2023-09-11","2023-09-12","2023-09-13","2023-09-14","2023-09-15","2023-09-18","2023-09-19"]'),
      price: JSON.parse('[["496.00","496.00","495.00","500.00"],["497.00","495.50","494.50","499.50"],["503.00","505.00","500.00","508.00"],["508.00","519.00","506.00","521.00"],["533.00","530.00","526.00","536.00"],["535.00","532.00","529.00","535.00"],["532.00","531.00","529.00","533.00"],["530.00","530.00","525.00","531.00"],["527.00","525.00","524.00","528.00"],["542.00","543.00","537.00","545.00"],["568.00","566.00","563.00","568.00"],["574.00","568.00","564.00","574.00"],["566.00","566.00","563.00","568.00"],["560.00","558.00","551.00","562.00"],["550.00","551.00","550.00","554.00"],["559.00","562.00","557.00","564.00"],["560.00","555.00","555.00","560.00"],["554.00","560.00","553.00","562.00"],["561.00","568.00","560.00","568.00"],["562.00","559.00","555.00","568.00"],["561.00","565.00","561.00","566.00"],["574.00","574.00","571.00","574.00"],["593.00","593.00","589.00","594.00"],["590.00","590.00","587.00","591.00"],["590.00","591.00","587.00","593.00"],["590.00","589.00","584.00","590.00"],["583.00","583.00","582.00","585.00"],["579.00","583.00","579.00","585.00"],["582.00","581.00","578.00","585.00"],["576.00","574.00","574.00","578.00"],["570.00","572.00","569.00","575.00"],["579.00","574.00","571.00","579.00"],["578.00","573.00","570.00","580.00"],["570.00","576.00","568.00","576.00"],["578.00","579.00","576.00","580.00"],["585.00","585.00","580.00","585.00"],["589.00","582.00","579.00","589.00"],["573.00","565.00","565.00","574.00"],["565.00","565.00","563.00","572.00"],["567.00","565.00","565.00","573.00"],["574.00","577.00","570.00","577.00"],["574.00","578.00","572.00","578.00"],["587.00","585.00","585.00","590.00"],["589.00","591.00","587.00","591.00"],["588.00","591.00","587.00","591.00"],["587.00","581.00","580.00","588.00"],["584.00","581.00","579.00","587.00"],["580.00","579.00","578.00","584.00"],["560.00","560.00","557.00","563.00"],["557.00","558.00","557.00","563.00"],["561.00","569.00","561.00","569.00"],["569.00","566.00","563.00","571.00"],["570.00","569.00","566.00","570.00"],["569.00","567.00","565.00","573.00"],["575.00","565.00","560.00","575.00"],["565.00","567.00","564.00","568.00"],["567.00","561.00","558.00","569.00"],["556.00","554.00","552.00","560.00"],["558.00","558.00","556.00","561.00"],["558.00","552.00","551.00","558.00"],["550.00","554.00","550.00","557.00"],["552.00","551.00","550.00","554.00"],["556.00","546.00","546.00","558.00"],["540.00","541.00","537.00","543.00"],["543.00","542.00","540.00","545.00"],["541.00","542.00","536.00","543.00"],["540.00","544.00","537.00","546.00"],["540.00","539.00","539.00","544.00"],["544.00","537.00","534.00","544.00"],["544.00","541.00","538.00","544.00"],["546.00","552.00","544.00","552.00"],["563.00","564.00","558.00","564.00"],["549.00","546.00","546.00","551.00"],["547.00","549.00","547.00","553.00"],["551.00","552.00","546.00","553.00"],["558.00","555.00","554.00","560.00"],["553.00","549.00","548.00","556.00"],["543.00","548.00","543.00","553.00"],["549.00","557.00","549.00","557.00"],["553.00","552.00","550.00","555.00"],["556.00","550.00","550.00","556.00"],["546.00","542.00","542.00","548.00"],["535.00","539.00","535.00","540.00"],["539.00","536.00","536.00","540.00"],["536.00","544.00","536.00","545.00"],["545.00","541.00","541.00","548.00"],["544.00","550.00","543.00","550.00"],["549.00","558.00","547.00","558.00"],["548.00","540.00","540.00","549.00"],["539.00","538.00","538.00","543.00"]]'),
      vol: JSON.parse('[18997,13629,21712,43202,45104,33983,17888,20005,19413,67844,103372,56857,41313,82138,24927,31324,17229,20632,28668,23666,19542,27996,60717,24246,28422,38842,14681,16640,22288,27700,21877,18441,17302,23022,15118,17735,15200,30250,19278,18745,18301,15809,26699,24070,14150,21563,22981,15543,49410,25997,20003,13856,12393,18948,24795,16490,26331,27580,14588,19863,14678,18337,18521,22037,14547,29452,23154,18059,17455,14853,21065,24119,25261,9172,10700,15429,40854,13858,9772,12459,14269,21825,16332,15509,16500,16543,17610,42871,38235,20277]'),
      ma5: JSON.parse('[502.4,500.7,499.7,502.9,509.1,516.3,523.4,528.4,529.6,532.2,539,546.4,553.6,560.2,561.8,561,558.4,557.2,559.2,560.8,561.4,565.2,571.8,576.2,582.6,587.4,589.2,587.2,585.4,582,578.6,576.8,574.8,573.8,574.8,577.4,579,577.4,575.2,572.4,570.8,570,574,579.2,584.4,585.2,585.8,584.6,578.4,571.8,569.4,566.4,564.4,565.8,567.2,566.8,565.8,562.8,561,558.4,555.8,553.8,552.2,548.8,546.8,544.4,543,541.6,540.8,540.6,542.6,546.6,548,550.4,552.6,553.2,550.2,550.6,552.2,552.2,551.2,549.8,548,543.8,542.2,540.4,542,545.8,546.6,545.4]'),
      ma10: JSON.parse('[500.9,500.25,500.65,502.95,506.15,509.35,512.05,514.05,516.25,520.65,527.65,534.9,541,544.9,547,550,552.4,555.4,559.7,561.3,561.2,561.8,564.5,567.7,571.7,574.4,577.2,579.5,580.8,582.3,583,583,581,579.6,578.4,578,577.9,576.1,574.5,573.6,574.1,574.5,575.7,577.2,578.4,578,577.9,579.3,578.8,578.1,577.3,576.1,574.5,572.1,569.5,568.1,566.1,563.6,563.4,562.8,561.3,559.8,557.5,554.9,552.6,550.1,548.4,546.9,544.8,543.7,543.5,544.8,544.8,545.6,546.6,547.9,548.4,549.3,551.3,552.4,552.2,550,549.3,548,547.2,545.8,545.9,546.9,545.2,543.8]'),
      ma20: JSON.parse('[504.2,503.18,502.43,502.63,503.63,504.58,505.58,506.73,508.08,510.65,514.28,517.58,520.83,523.93,526.58,529.68,532.23,534.73,537.98,540.98,544.43,548.35,552.75,556.3,559.35,562.2,564.8,567.45,570.25,571.8,572.1,572.4,572.75,573.65,575.05,576.2,577.55,577.8,577.65,577.95,578.55,578.75,578.35,578.4,578.4,578,577.9,577.7,576.65,575.85,575.7,575.3,575.1,574.65,573.95,573.05,572,571.45,571.1,570.45,569.3,567.95,566,563.5,561.05,559.1,557.25,555.25,554.1,553.25,552.4,552.3,551.15,550.25,549.6,549,548.4,548.1,548.05,548.05,547.85,547.4,547.05,546.8,546.9,546.85,547.15,548.1,548.25,548.1]'),
  };
  var kchart = echarts.init(document.getElementById('kchart'));
  var option = {
      animation: true,
      title: {
          text: '日K線',
      },

      legend: {
          top: 3,
          //left: 'center',
          right: '2%',
          data: ['MA5', 'MA10', 'MA20']
      },
      grid: [{
          left: '38rem',
          right: '2%',
          height: '55%'
      }, {
          left: '38rem',
          right: '2%',
          bottom: '12%',
          height: '10%'
      }],
      tooltip: {
          trigger: 'axis',
          axisPointer: {
              type: 'cross'
          },
          triggerOn: 'mousemove',
          backgroundColor: 'rgba(245, 245, 245, 0.7)',
          borderWidth: 1,
          borderColor: '#ccc',
          padding: 10,
          textStyle: {
              color: '#777',
          },
          extraCssText: 'width: 170px',
          position: function(pos, params, el, elRect, size) {
              var obj = {
                  top: 10
              };
              obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30;
              return obj;
          },
      },
      axisPointer: {
          link: {
              xAxisIndex: 'all'
          },
          label: {
              backgroundColor: '#888'
          }
      },
      xAxis: [{
          scale: true,
          type: 'category',
          data: data.date

      }, {
          scale: true,
          type: 'category',
          gridIndex: 1,
          data: data.date,
          axisLabel: {
              show: false
          },

      }],
      yAxis: [{
          scale: true,
          axisLine: {
              show: true
          },
          splitArea: {
              show: true
          }
      }, {
          scale: true,
          gridIndex: 1,
          splitNumber: 2,
          axisLabel: {
              show: true
          },
          axisLine: {
              show: true
          },

      }],
      dataZoom: [
      {
          type: 'inside',
          xAxisIndex: [0, 1],
          start: 0,
          end: 100
      },
      {
          type: 'slider',
          handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',
          xAxisIndex: [0, 1],
          start: 0,
          end: 100
      }],
      series: [{
          name: '日K線',
          type: 'candlestick',
          itemStyle: {
              normal: {
                  color: color.up,
                  color0: color.down,
                  borderColor: color.up,
                  borderColor0: color.down
              }
          },
          data: data.price

      }, {
          name: 'MA5',
          type: 'line',
          smooth: true,
          showSymbol: false,
          data: data.ma5,
          itemStyle: {
              color: color.ma5
          },
          lineStyle: {
              opacity: 0.5,
          },

      }, {
          name: 'MA10',
          type: 'line',
          smooth: true,
          showSymbol: false,
          data: data.ma10,
          itemStyle: {
              color: color.ma10
          },
          lineStyle: {
              opacity: 0.5,
          },

      }, {
          name: 'MA20',
          type: 'line',
          smooth: true,
          showSymbol: false,
          data: data.ma20,
          itemStyle: {
              color: color.ma20
          },
          lineStyle: {
              opacity: 0.5,
          },

      }, {
          name: '成交量',
          type: 'bar',
          itemStyle: {
              color: color.vol
          },
          xAxisIndex: 1,
          yAxisIndex: 1,
          data: data.vol
      }]

  };
  kchart.setOption(option);
});