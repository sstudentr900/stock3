<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  </head>
  <body>
    <h2>JavaScript 中未定義的屬性</h2>
    <pre class="prettyprint">
      <xmp>
        const arr = [];
      console.log(arr[0].name); //會報錯
      console.log(arr[0] && arr[0].name);//不會報錯 
      console.log(arr[0]?.name);//等同上面
      </xmp>
    </pre>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://bobbyhadz.com/blog/javascript-cannot-read-property-of-undefined">JavaScript 中未定義的屬性</a>
      </li>
    </ul>
    <hr>

    <h2>JavaScript 獲取數組的最後一個元素</h2>
    <pre class="prettyprint">
      <xmp>
        let arry = [2, 4, 6, 8, 10, 12, 14, 16];

        console.time('array length property');
        let lastElement = arry[arry.length - 1];
        console.log(lastElement); //16
        console.timeEnd('array length property');

        console.time('array slice method');
        let lastElement1 = arry.slice(-1);
        console.log(lastElement1); //[16]
        console.timeEnd('array slice method');

        console.time('array pop method');
        let lastElement2 = arry.pop();
        console.log(lastElement2); //16
        console.timeEnd('array pop method');


        //Output:
        //array length property: 13.798ms
        //array slice method: 8.839ms
        //array pop method: 0.138ms
      </xmp>
    </pre>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://flexiple.com/javascript/get-last-array-element-javascript/">最後一個元素</a>
      </li>
    </ul>
    <hr>

    <h2>JavaScript 陣列</h2>
    <pre class="prettyprint">
      <xmp></xmp>
    </pre>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://www.casper.tw/javascript/2017/06/29/es6-native-array/">JavaScript 陣列</a>
      </li>
    </ul>
    <hr>

    <h2>object values null</h2>
    <pre class="prettyprint">
      <xmp>
        var a = {}
        var b = {
          'a':'12'
        }
        console.log( Object.values(a).length) //0
        console.log( Object.values(b).length) //1
      </xmp>
    </pre>
    <hr>

    <h2>Remove object values </h2>
    <pre class="prettyprint">
      <xmp>
        var person = {
          name: "Harry",
          age: 16,
          gender: "Male"
        };
        delete person.age;
        console.log(person.age);  // Prints: undefined
        console.log(person);  // Prints: {name: "Harry", gender: "Male"}
      </xmp>
    </pre>
    <hr>

    <h2>同時運行Node.js服務器和Apache服務器</h2>
    <h3>1.在Apache->httpd.conf 加入ProxyPass</h3>
    <p>/stock2/會轉成->http://localhost:3000/</p>
    <p>/stock2/多個斜線因為後面會有接值</p>
    <pre class="prettyprint">
      <xmp>
        ProxyPass /stock2/ http://localhost:3000/
      </xmp>
    </pre>
    <h3>2.刪除註釋</h3>
    <pre class="prettyprint">
      <xmp>
        LoadModule proxy_module modules/mod_proxy.so
        LoadModule proxy_http_module modules/mod_proxy_http.so
      </xmp>
    </pre>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://medium.com/@chamiperera95/how-to-run-node-js-server-and-apache-server-together-ee225ece6a44">參考</a>
      </li>
      <li>
        <a href="https://blog.csdn.net/u011277123/article/details/77165137">參考</a>
      </li>
    </ul>
    <hr>
    <h2>爬蟲 用 request + cheerio</h2>
    <h3>1.安裝</h3>
    <pre class="prettyprint">
      <xmp>
        npm install request cheerio
      </xmp>
    </pre>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://andy6804tw.github.io/2018/02/11/nodejs-crawler/">[Node.js 爬蟲] 用 request + cheerio 抓取地震資訊</a>
      </li>
    </ul>
    <hr>
    <h2>yahoo-finance 股票</h2>
    <h3>1.安裝</h3>
    <pre class="prettyprint">
      <xmp>
        npm install --save yahoo-finance
      </xmp>
    </pre>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://www.npmjs.com/package/yahoo-finance">yahoo-finance</a>
      </li>
    </ul>
    <hr>
    <h2>Express</h2>
    <p>Express前後端網頁框架</p>
    <h3>1.安裝</h3>
    <pre class="prettyprint">
      <xmp>
        npm install express --save
      </xmp>
    </pre>
    <h3>2.路由</h3>
    <h3>3.middleware</h3>
    <h3>4.載入靜態檔案 static</h3>
    <pre class="prettyprint">
      <xmp>
        <!-- express 的靜態方法去找到要呈現的靜態檔案。需加上這一段 -->
        app.use(express.static('public'));
      app.get("/", (req, res) => {
        res.send("
        <h1>這是 middleware 練習</h1>
        "+ "
        <img src="./images/book.jpg">
        ");
      });
      </xmp>
    </pre>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://ithelp.ithome.com.tw/articles/10308430">Node.js - Express.js 介紹與起手式</a>
      </li>
    </ul>
    <hr>

    <h2>EJS</h2>
    <p>是一個簡易的模板語法</p>
    <h3>安裝</h3>
    <pre class="prettyprint">
      <xmp>
        npm i -D ejs
      npm i -D ejs-locals
      </xmp>
    </pre>
    <h3>引入EJS</h3>
    <pre class="prettyprint">
      <xmp>
        <!-- EJS 核心 -->
        const engine = require("ejs-locals");
      app.engine("ejs", engine);
        <!-- 讀取 EJS 檔案位置 -->
        app.set('views','./views');
        <!-- 用 EJS 引擎跑模板 -->
        app.set("view engine", "ejs");
        <!-- 引入 index.ejs -->
        app.get("/", (req, res) => {
        res.render("index");
      });
      </xmp>
    </pre>
    <h3>將JSON對像傳遞給模板之前，您需要將其轉換回字符串</h3>
    <pre class="prettyprint">
      <xmp>
        var str = JSON.parse('[{"name":"bill", "age":"26"}, {"name":"jeff", "age":"32"}]');
        app.get('/data', function(req, res){
            res.render('data', { str: JSON.stringify(str) });
        });
      </xmp>
    </pre>
    <h3>將JSON對像轉換字符串存才能存在js，之後再轉對像使用</h3>
    <pre class="prettyprint">
      <xmp>
        JSON.parse('<%- JSON.stringify(data) %>').forEach(d=>creatStrockHtml(d))
      </xmp>
    </pre>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://ithelp.ithome.com.tw/articles/10308702">Node.js - EJS 介紹與起手式</a>
      </li>
      <li>
        <a href="https://medium.com/web-design-zone/ejs%E6%A8%A3%E6%9D%BF%E5%BC%95%E6%93%8E%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-40873ea2dfae" target="_blank">Node.js — EJS樣板引擎的使用方式</a>
      </li>
      <li>
        <a href="https://stackoverflow.com/questions/47066222/can-i-render-json-parse-data-to-ejs" target="_blank">將 JSON 數據渲染到 EJS 嗎？</a>
      </li>
      <li>
        <a href="https://ejs.co/" target="_blank">EJS</a>
      </li>
    </ul>
    <hr>
    <h2>mysql</h2>
    <h3>sql datetime to node.js</h3>
    <p>sql時間轉換</p>
    <pre class="prettyprint">
      <xmp>
        var datee = new Date('dateTime');
      console.log(
        datee.getFullYear()+'-'+
        ('0'+(datee.getMonth()+1)).slice(-2)+'-'+
        ('0'+datee.getDate()).slice(-2)+' '+
        ('0'+(datee.getHours())).slice(-2)+':'+
        ('0'+(datee.getMinutes())).slice(-2)+':'+
        ('0'+(datee.getSeconds())).slice(-2)
      );
      </xmp>
    </pre>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://stackoverflow.com/questions/62120309/sql-datetime-to-nodejs">SQL DATETIME to Nodejs</a>
      </li>
    </ul>
    <hr>
    <h2>Node.js-Express+MySQL</h2>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://ithelp.ithome.com.tw/articles/10237562">參考</a>
      </li>
      <li>
        <a href="https://www.youtube.com/watch?v=f5kye3ESXE8&ab_channel=Raddy">參考</a>
      </li>
      <li>
        <a href="https://dotblogs.com.tw/explooosion/2016/07/18/010601">參考</a>
      </li>
    </ul>
    <hr>
  </body>
</html>
